{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Criar Conta | Academia</title>
  <link rel="stylesheet" href="{% static 'global/css/style.css' %}">
</head>
<body class="auth-page">

  <!-- LOGO -->
  <div class="logo-container">
    <img src="{% static 'global/img/logo-unilife.png' %}" alt="Logo" class="logo-img">
  </div>

  <form class="card" method="post" action="">
  {% csrf_token %}
  <h1 class="title">Cadastra-se</h1>
  <p class="subtitle">Preencha seus dados para criar uma conta.</p>

  <div class="form-grid">
    <div class="field-group">
      <label for="id_first_name">Nome</label>
      <input type="text" name="first_name" id="id_first_name" required placeholder="Seu nome">
    </div>

    <div class="field-group">
      <label for="id_last_name">Sobrenome</label>
      <input type="text" name="last_name" id="id_last_name" placeholder="Seu sobrenome">
    </div>

    <div class="field-group span-2">
      <label for="id_email">E-mail</label>
      <input type="email" name="email" id="id_email" required placeholder="voce@exemplo.com">
    </div>

    <div class="field-group">
      <label for="id_cpf">CPF</label>
      <input type="text" name="cpf" id="id_cpf" required placeholder="000.000.000-00">
    </div>

    <div class="field-group">
      <label for="id_tel">Telefone (com DDD)</label>
      <input type="text" name="tel" id="id_tel" required placeholder="(11) 99999-9999">
    </div>

    <div class="field-group">
      <label for="id_sex">Sexo</label>
      <select name="sex" id="id_sex" required>
        <option value="">Selecione</option>
        <option value="M">Masculino</option>
        <option value="F">Feminino</option>
        <option value="O">Outro</option>
      </select>
    </div>

    <div class="field-group">
      <label for="id_date_of_birth">Data de nascimento</label>
      <input type="date" name="date_of_birth" id="id_date_of_birth" required>
    </div>

    <div class="field-group span-2">
      <label for="id_restrictions">Restri√ß√µes</label>
      <textarea name="restrictions" id="id_restrictions" rows="3"
                placeholder="Ex: dor lombar, hipertens√£o..."></textarea>
    </div>

    <div class="field-group">
      <label for="id_password1">Senha</label>
<div class="input-password" style="position:relative;">
  <input type="password" name="password1" id="id_password1" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
         style="padding-right:40px;">
  <button type="button"
          class="toggle-password"
          aria-label="Mostrar senha"
          data-target="id_password1"
          data-open="{% static 'global/img/olho-aberto.png' %}"
          data-closed="{% static 'global/img/olho-fechado.png' %}"
          style="position:absolute; right:10px; top:50%; transform:translateY(-50%);
                 background:none; border:0; padding:4px; cursor:pointer;"
          onclick="
            const input = document.getElementById(this.dataset.target);
            const img   = this.querySelector('img');
            const show  = (input.type === 'password');
            input.type  = show ? 'text' : 'password';
            img.src     = show ? this.dataset.open : this.dataset.closed;
            this.setAttribute('aria-label', show ? 'Ocultar senha' : 'Mostrar senha');
          ">
    <img src="{% static 'global/img/olho-fechado.png' %}" alt="" width="22" height="22" draggable="false" style="pointer-events:none;">
  </button>
</div>
    </div>

    <div class="field-group">
      <label for="id_password2">Confirmar senha</label>
      <div class="input-password">
        <input type="password" name="password2" id="id_password2" required placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
        <button type="button" class="toggle-password" data-target="id_password2">üëÅ</button>
      </div>
    </div>

    <button class="btn btn-green span-2" type="submit">Criar Conta</button>

    <div class="footer span-2" style="text-align:center;margin-top:10px;">
      <small>J√° tem conta? <a href="/" class="link">Entrar</a></small>
    </div>
  </div>
</form>


  <!-- M√°scaras + Toggle Senha -->
  <script>
    // CPF
    function maskCPF(v){
      return v.replace(/\D/g,'')
              .replace(/(\d{3})(\d)/,'$1.$2')
              .replace(/(\d{3})(\d)/,'$1.$2')
              .replace(/(\d{3})(\d{1,2})$/,'$1-$2')
              .substring(0,14);
    }
    // Telefone (com DDD)
    function maskTel(v){
      v = v.replace(/\D/g,'');
      if (v.length <= 10) {
        return v.replace(/(\d{2})(\d{4})(\d{0,4})/,'($1) $2-$3');
      } else {
        return v.replace(/(\d{2})(\d{5})(\d{0,4})/,'($1) $2-$3');
      }
    }
    // Toggle password
    function setupPasswordToggles(){
      document.querySelectorAll(".toggle-password").forEach(btn => {
        btn.addEventListener("click", () => {
          const input = document.getElementById(btn.dataset.target);
          if (!input) return;
          if (input.type === "password") {
            input.type = "text";
            btn.textContent = "üôà";
          } else {
            input.type = "password";
            btn.textContent = "üëÅ";
          }
        });
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      const cpf = document.getElementById("id_cpf");
      const tel = document.getElementById("id_tel");
      if (cpf) cpf.addEventListener("input", e => e.target.value = maskCPF(e.target.value));
      if (tel) tel.addEventListener("input", e => e.target.value = maskTel(e.target.value));
      setupPasswordToggles();
    });
  </script>
</body>
</html>
